resources:
  jobs:
    demo_job:
      name: demo_job_${bundle.target}

      trigger:        
        file_arrival:
          url: ${var.volumepath}

      email_notifications:
        on_failure:
          - marcel.yepes@lovelytics.com

      tasks:
        - task_key: notebook_task
          notebook_task:
            notebook_path: ../src/create_table.py         
        - task_key: pipeline_task
          depends_on:
            - task_key: notebook_task
          pipeline_task:
            pipeline_id: ${resources.pipelines.etl_pipeline.id}
      
      parameters:
         - name: catalog
           default: ${var.catalog}
         - name: schema
           default: ${var.schema}

   


    